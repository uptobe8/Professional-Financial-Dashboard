<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Financiero</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <h2>üí∞ Finanzly</h2>
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="#" class="nav-item active" data-screen="inicio">Inicio</a></li>
                <li><a href="#" class="nav-item" data-screen="cambios">Cambios del mes</a></li>
                <li><a href="#" class="nav-item" data-screen="palancas">Qu√© hacer</a></li>
                <li><a href="#" class="nav-item" data-screen="caja">Caja & Riesgo</a></li>
                <li><a href="#" class="nav-item" data-screen="gastos">Gastos</a></li>
                <li><a href="#" class="nav-item" data-screen="simulador">Simulador</a></li>
                <li><a href="#" class="nav-item" data-screen="forecast">Forecast</a></li>
                <li><a href="#" class="nav-item" data-screen="movimientos">Movimientos</a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- File Upload Section -->
        <div class="upload-section">
            <label for="csv-upload" class="file-label">
                üìÇ Cargar CSV
                <input type="file" id="csv-upload" accept=".csv" style="display: none;">
            </label>
        </div>

        <!-- Screen 1: Inicio -->
        <div class="screen active" id="screen-inicio">
            <h1>Estado del negocio hoy</h1>

            <div class="kpi-grid">
                <div class="card-kpi">
                    <div class="title">Ingresos totales</div>
                    <div class="subtitle">Lo que has vendido este mes</div>
                    <div class="value" id="total-income">0 ‚Ç¨</div>
                    <div class="change" id="kpi-ingresos-change"></div>
                </div>
                <div class="card-kpi">
                    <div class="title">Gastos totales</div>
                    <div class="subtitle">Lo que has gastado este mes</div>
                    <div class="value" id="total-expenses">0 ‚Ç¨</div>
                    <div class="change" id="kpi-gastos-change"></div>
                </div>
                <div class="card-kpi">
                    <div class="title">Beneficio neto</div>
                    <div class="subtitle">Lo que te queda limpio</div>
                    <div class="value" id="net-profit">0 ‚Ç¨</div>
                    <div class="change" id="kpi-beneficio-change"></div>
                </div>
                <div class="card-kpi">
                    <div class="title">Margen de beneficio</div>
                    <div class="subtitle">De cada 100 ‚Ç¨, te quedas X ‚Ç¨</div>
                    <div class="value" id="profit-margin">0%</div>
                </div>
            </div>

            <div class="semaforo-section">
                <div class="kpi-status" id="estado-general">
                    <span class="status-icon">üü¢</span>
                    <span class="status-text">Estado general del negocio</span>
                </div>
            </div>

            <div class="alert-box" id="conclusion-rapida">
                <h3>Resumen r√°pido</h3>
                <p id="conclusion-texto">Carga un archivo CSV para ver el an√°lisis</p>
            </div>

            <!-- A√±adido: gr√°ficos -->
            <div class="charts-section">
                <canvas id="mainChart" height="200"></canvas>
                <canvas id="categoryChart" height="200"></canvas>
            </div>
        </div>

        <!-- Screen 2: Cambios -->
        <div class="screen" id="screen-cambios">
            <h1>Qu√© ha cambiado este mes</h1>
            <div class="list-block" id="cambios-list">
                <div class="list-item">
                    <span>Carga datos para ver cambios</span>
                </div>
            </div>
            <div class="insight-block">
                <p>Estos cambios explican casi todo el resultado de este mes.</p>
            </div>
        </div>

        <!-- Screen 3: Palancas -->
        <div class="screen" id="screen-palancas">
            <h1>Qu√© puedes hacer ahora</h1>
            <div class="palancas-grid" id="palancas-container">
                <div class="palanca-card">
                    <h3>Reducir gasto en Marketing</h3>
                    <p class="impacto">Impacto: <strong>Alto</strong></p>
                    <p class="esfuerzo">Esfuerzo: <strong>Bajo</strong></p>
                    <button class="cta-button">Elegir esta acci√≥n</button>
                </div>
            </div>
            <div class="recomendacion-block" id="recomendacion-palanca">
                <p>Recomendaci√≥n: empieza por la acci√≥n con m√°s impacto y menos esfuerzo.</p>
            </div>
        </div>

        <!-- Screen 4: Caja -->
        <div class="screen" id="screen-caja">
            <h1>Caja y supervivencia</h1>
            <div class="kpi-grid">
                <div class="card-kpi">
                    <div class="title">Caja actual</div>
                    <div class="subtitle">Dinero disponible ahora mismo</div>
                    <div class="value" id="caja-actual">0 ‚Ç¨</div>
                </div>
                <div class="card-kpi">
                    <div class="title">Flujo √∫ltimos 30 d√≠as</div>
                    <div class="subtitle">Si entra m√°s dinero del que sale</div>
                    <div class="value" id="flujo-30">0 ‚Ç¨</div>
                </div>
                <div class="card-kpi">
                    <div class="title">Runway</div>
                    <div class="subtitle">Meses que puedes aguantar as√≠</div>
                    <div class="value" id="runway">0 meses</div>
                </div>
            </div>
            <div class="alerta-caja" id="alerta-caja">
                <div class="kpi-status">
                    <span class="status-icon">üü¢</span>
                    <span class="status-text">Tienes margen</span>
                </div>
                <p id="texto-runway">A este ritmo tienes X meses antes de tener problemas.</p>
            </div>
        </div>

        <!-- Screen 5: Gastos -->
        <div class="screen" id="screen-gastos">
            <h1>En qu√© se va el dinero</h1>
            <div class="gastos-layout">
                <div class="gastos-ranking">
                    <h3>Ranking de gastos</h3>
                    <div class="list-block" id="gastos-ranking-list"></div>
                </div>
                <div class="gastos-visual">
                    <canvas id="gastos-donut"></canvas>
                </div>
            </div>
            <div class="insight-block">
                <p id="gastos-insight">La mayor parte del gasto est√° concentrada en pocas categor√≠as.</p>
            </div>
        </div>

        <!-- Screen 6: Simulador -->
        <div class="screen" id="screen-simulador">
            <h1>¬øY si cambias algo?</h1>
            <div class="simulador-container">
                <div class="slider-group">
                    <label>Aumentar ingresos</label>
                    <input type="range" id="income-slider" min="0" max="50" value="0" class="sim-slider">
                    <span class="slider-value" id="income-sim-val">+0%</span>
                </div>
                <div class="slider-group">
                    <label>Reducir gastos</label>
                    <input type="range" id="expense-slider" min="0" max="50" value="0" class="sim-slider">
                    <span class="slider-value" id="expense-sim-val">-0%</span>
                </div>
                <div class="resultado-sim">
                    <div class="resultado-item">
                        <span>Beneficio actual:</span>
                        <strong id="sim-beneficio-actual">0 ‚Ç¨</strong>
                    </div>
                    <div class="resultado-item destacado">
                        <span>Beneficio si haces esto:</span>
                        <strong id="projected-profit">0 ‚Ç¨</strong>
                    </div>
                </div>
                <div class="insight-block" id="sim-insight">
                    <p>Esta acci√≥n tiene m√°s impacto que la otra.</p>
                </div>
            </div>
        </div>

        <!-- Screen 7: Forecast -->
        <div class="screen" id="screen-forecast">
            <h1>Qu√© puede pasar en los pr√≥ximos meses</h1>
            <div class="forecast-table-container">
                <table class="forecast-table" id="forecast-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Base<br><small>Si sigues igual</small></th>
                            <th>Conservador<br><small>Si va un poco peor</small></th>
                            <th>Agresivo<br><small>Si haces cambios</small></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ingresos</td>
                            <td id="fc-ing-base">-</td>
                            <td id="fc-ing-con">-</td>
                            <td id="fc-ing-agr">-</td>
                        </tr>
                        <tr>
                            <td>Gastos</td>
                            <td id="fc-gas-base">-</td>
                            <td id="fc-gas-con">-</td>
                            <td id="fc-gas-agr">-</td>
                        </tr>
                        <tr>
                            <td>Beneficio</td>
                            <td id="fc-ben-base">-</td>
                            <td id="fc-ben-con">-</td>
                            <td id="fc-ben-agr">-</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="insight-block">
                <p><strong>Si no haces nada ‚Üí escenario base</strong></p>
                <p>Si act√∫as ‚Üí mejora el resultado</p>
            </div>
        </div>

        <!-- Screen 8: Movimientos -->
        <div class="screen" id="screen-movimientos">
            <h1>Detalle de movimientos</h1>
            <p class="subtitle">Aqu√≠ puedes ver de d√≥nde sale cada n√∫mero.</p>
            <div class="filters-section">
                <select id="filter-mes" class="filter-select">
                    <option value="all">Todos los meses</option>
                </select>
                <select id="filter-tipo" class="filter-select">
                    <option value="all">Todos los tipos</option>
                    <option value="Ingreso">Ingresos</option>
                    <option value="Gasto">Gastos</option>
                </select>
                <select id="filter-categoria" class="filter-select">
                    <option value="all">Todas las categor√≠as</option>
                </select>
            </div>
            <div class="table-container">
                <table class="movements-table" id="movimientos-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Categor√≠a</th>
                            <th>Concepto</th>
                            <th>Cantidad</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="main.js"></script>
</body>
</html>
